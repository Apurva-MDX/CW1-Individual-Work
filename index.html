<Doctype html>
    <head>
        <title> After School CLub </title>
        <script src="https://unpkg.com/vue"></script>
        <script src="/subjects.js"></script>
        <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/fontawesome/5.15.1/css/all.min.css">
    </head>
    <body> 
        <div id="app">
            <main>
                <button v-on:click='showCheckout'>
                    {{cartItemCount}}
                    <span class='fas fa-shopping-cart'></span>
                    Check Out
                </button>
                <br>
                <br>
                <div v-if='showProduct'>
                    <h1 v-text="HomePage"></h1>
                    <img v-bind:src="product.image"
                    v-bind:width= 'product.imageWidth'>
                    <h2>{{product.title}} </h2>
                    <p>{{product.location}}</p>
                    <p>Number of Spaces: {{product.NoOfSpaces}}</p>
                    <p>price: {{product.price}} </p>
                    <button v-on:click="addToCart" v-bind:disabled='!canAddToCart'>Add to cart</button>
                </main>
            </div>
        </div>
        <div v-else>

        </div>
        <script type="text/javascript"> 
          //Vue Object creation
            var webstore = new Vue(
            {
                el: '#app',
                data: {
                    HomePage: "After School Club",
                    CartPage: "The Shopping Cart",
                    showProduct: true,
                    
                    sort: {
                    sortingMethod: "location",
                    sortingOrder: "ascending",
                },

                order: {
                    firstName: '',
                    lastName: '',
                    address: '',
                    city: '',
                    zip: '',
                    state: '',
                    method: 'Home',
                    

                    
                },

                state: {
                    AL: 'Alabama',
                    AR: 'Arizona',
                    CA: 'Canada',
                    NV: 'Nevada',
                },

            user:{
                id: '',
                name: '',
                number: '',
            },
            products: NoOfSubjects,
            cart: [],

        },

        methods:{
                
                addToCart: function(lessons) {
                    
                    this.cart.push(lessons);
                },

                deleteFromCart: function(lessons, cart) {
                   this.cart.splice(this.cart.indexOf(lessons), 1);
                },

                showCheckout: function(){
                    console.log(this.showProd);
                    this.showProd = this.showProd ? false : true;
                },

                submitForm(user) {
                    
                    alert('Thank you for purchasing '+ user.name + 'Your order has been placed!');
                
                },

                canAddToCart: function(lessons){
                    return lessons.availablespace > this.cartCount(lessons);
                },

                cartCount(id) {
                    let count = 0;
                    for(let i = 0; i < this.cart.length; i++) {
                    if (this.cart[i] === id) {
                    count++;
                        }
                    }
                    return count;
                },

            computed: {
                //returns length of the cart items
                cartItemCount: function() {
                    return this.cart.length || ''
                },

                //checks if cartItems is < availableInventory
                canAddToCart: function() {
                    return this.product.availableInventory > this.cartItemCount;
                }

            }

        }
        );
    </script>
</body>
</html>