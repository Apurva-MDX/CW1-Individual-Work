<Doctype html>
    <head>
        <title> After School CLub </title>
        <script src="https://unpkg.com/vue"></script>
        <script src="/subjects.js"></script>
        <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/fontawesome/5.15.1/css/all.min.css">
    </head>
    <body> 
        <div id="app">
            <main>
                <button v-on:click='showCheckout'>
                    {{cartItemCount}}
                    <span class='fas fa-shopping-cart'></span>
                    Check Out
                </button>
                <br>
                <br>
                <div v-if='showProduct'>
                    <h1 v-text="HomePage"></h1>
                    <img v-bind:src="product.image"
                    v-bind:width= 'product.imageWidth'>
                    <h2>{{product.title}} </h2>
                    <p>{{product.location}}</p>
                    <p>Number of Spaces: {{product.NoOfSpaces}}</p>
                    <p>price: {{product.price}} </p>
                    <button v-on:click="addToCart" v-bind:disabled='!canAddToCart'>Add to cart</button>
                </main>
            </div>
        </div>
        <div v-else>

        </div>
        <script type="text/javascript"> 
          //Vue Object creation
            var webstore = new Vue(
            {
                el: '#app',
                data: {
                    HomePage: "After School Club",
                    CartPage: "The Shopping Cart",
                    showProduct: true,
                    
                    sort: {
                    sortingMethod: "location",
                    sortingOrder: "ascending",
                },

                order: {
                    firstName: '',
                    lastName: '',
                    address: '',
                    city: '',
                    zip: '',
                    state: '',
                    method: 'Home',
                    

                    
                },

                state: {
                    AL: 'Alabama',
                    AR: 'Arizona',
                    CA: 'Canada',
                    NV: 'Nevada',
                },

            buyer:{
                id: '',
                name: '',
                number: '',
            },
            products: NoOfSubjects,
            cart: [],

        },

        methods:{
                
                addToCart: function(subjects) {
                    
                    this.cart.push(subjects);
                },

                deleteFromCart: function(subjects, cart) {
                   this.cart.splice(this.cart.indexOf(subjects), 1);
                },

                showCheckout: function(){
                    console.log(this.showProduct);
                    this.showProduct = this.showProduct ? false : true;
                },

                submitForm(buyer) {
                    
<<<<<<< HEAD
                    alert('Thank you for purchasing'+ buyer.name + 'Your order has been placed!');
=======
                    alert('Thank you for purchasing '+ user.name + 'Your order has been placed!');
>>>>>>> ff48bd17acd79598520be1a7162e2d887c4785aa
                
                },

                canAddToCart: function(subjects){
                    return subjects.availableInventory > this.cartCount(subjects);
                },

                cartCount(id) {
                    let count = 0;
                    for(let i = 0; i < this.cart.length; i++) {
                    if (this.cart[i] === id) {
                    count++;
                        }
                    }
                    return count;
                },
<<<<<<< HEAD
            },
                
=======

>>>>>>> ff48bd17acd79598520be1a7162e2d887c4785aa
            computed: {
                    cartItemCount: function(subjects){
                        return this.cart.length || '';
                    },

                    sortedSubjects(subjects, sort){
                    //These make the sorting of price and subject by ascending to descending

                    if(this.sort.sortingMethod === "price" && this.sort.sortingOrder === "ascending" ){
                    function compare (a, b){
                        if (a.price > b.price) return 1;
                        if (a.price < b.price) return -1;
                        return 0;
                    }
                }else if(this.sort.sortingMethod === "price" && this.sort.sortingOrder === "descending" ){
                    function compare (a, b){
                        if (a.price < b.price) return 1;
                        if (a.price > b.price) return -1;
                        return 0;
                    }
                }else if(this.sort.sortingMethod == "title" && this.sort.sortingOrder === "ascending" ){
                    function compare (a, b){
                        if (a.title > b.title) return 1;
                        if (a.title < b.title) return -1;
                        return 0;
                    }
                }else if(this.sort.sortingMethod == "title" && this.sort.sortingOrder === "descending" ){
                    function compare (a, b){
                        if (a.title < b.title) return 1;
                        if (a.title > b.title) return -1;
                        return 0;
                    }
                }else if(this.sort.sortingMethod == "availableInventory" && this.sort.sortingOrder === "ascending" ){
                    function compare (a, b){
                        if (a.availableInventory > b.availableInventory) return 1;
                        if (a.availableInventory < b.availableInventory) return -1;
                        return 0;
                    }
                }else if(this.sort.sortingMethod == "availableInventory" && this.sort.sortingOrder === "descending" ){
                    function compare (a, b){
                        if (a.availableInventory < b.availableInventory) return 1;
                        if (a.availableInventory > b.availableInventory) return -1;
                        return 0;
                    }
                }
                    return this.title.sort(compare);

                },

                    
                },     
            })
    </script>
</body>
</html>